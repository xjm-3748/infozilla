packag ncsu csc itrust chart import java serializ import java text date format import java text pars import java text simpl date format import java util calendar import java util date import java util link list import java util list import java util map import org jfree data categori categori dataset import org jfree data categori default categori dataset import laur cewolf dataset produc import laur cewolf dataset produc import laur cewolf link categori item link generat import laur cewolf tooltip categori tool tip generat import ncsu csc itrust bean lab procedur bean class handl data chart height weight inform wolf free chart class implement dataset produc categori tool tip generat categori item link generat serializ author public class patient lab result implement dataset produc categori tool tip generat categori item link generat serializ privat static final long serial version number quarter chart set quarter year privat final int histori length privat string quarter initi valu month privat doubl valu number entri quarter calcul averag privat int num entri list health record privat list lab procedur bean bean link list lab procedur bean prescript immun analysi privat string lab procedur ani data display return fals data display public boolean data date year date date rec date string date str date format year simpl date format yyyi date format rest simpl date format hmma date format sdf simpl date format yyyi hmma date str year format year date str integ pars int date str date str rest format year tri year sdf pars date str catch pars return fals lab procedur bean lpb bean rec date date lpb timestamp time rec date befor year continu els return true return fals call initi list lab procedur bean produc desir chart param lpsbs lab procedur bean patient view param lab procedur public void initi lab procedur list lab procedur bean lpbs string bean lpbs lab procedur quarter string histori length valu doubl histori length num entri int histori length calendar cal calendar instanc cal add calendar histori length int start month cal calendar int start start month simpl date format sdf simpl date format int histori length quarter start sdf format cal time valu num entri cal add calendar method pars list advers event bean initi chart dataset param map paramet pass wolf actual local return dataset inform graph throw dataset produc public object produc dataset map param throw dataset produc default categori dataset bar chart dataset class chang base type chart produc default categori dataset dataset default categori dataset privat static final long serial version java lang object final overrid protect void final throw throwabl super final calendar cur calendar instanc int cur quarter cur calendar lab procedur bean lpb bean calendar cal calendar instanc cal set time lpb timestamp int year report cal calendar int month report cal calendar int quarter report month report int quarter histori length cur calendar year report cur quarter quarter report skip entri histori rang quarter continu calcul averag quarter doubl valu valu lpb numer result doubl valu quarter valu quarter num entri quarter valu num entri quarter num entri quarter month add month valu dataset produc chart int histori length valu dataset add valu valu lab procedur quarter return dataset produc data invalid method produc influenc cewolf cach behavior public boolean expir map param date sinc return system current time milli sinc time return uniqu dataset produc public string produc return health data dataset produc return link target special data item public string generat link object data int seri object categori return quarter seri java lang object final overrid protect void final throw throwabl super final org jfree chart tooltip categori tool tip generat generat tool tip categori dataset int int public string generat tool tip categori dataset arg int seri int arg return quarter seri 